(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,a){e.exports=a.p+"static/media/no-avalible-image.1e663c15.png"},18:function(e,t,a){e.exports={Footer:"Footer_Footer__2SXCT",Footer__main:"Footer_Footer__main__2cIeb",Footer__sub:"Footer_Footer__sub__9I5_i",Footer__circle:"Footer_Footer__circle__3KEHD"}},19:function(e,t,a){e.exports={Icons:"MonumentsIcons_Icons__S374-",IconsHeader:"MonumentsIcons_IconsHeader__1QSdM",IconsFooter:"MonumentsIcons_IconsFooter__3-FKc"}},20:function(e,t,a){e.exports={Stripe:"Stripe_Stripe__GgOHy",Absolute:"Stripe_Absolute__3e1f1",Fixed:"Stripe_Fixed__3HKMF"}},21:function(e,t,a){e.exports={Details:"PlaceDetails_Details__s-8XY",Close:"PlaceDetails_Close__1kB0T",Navigation:"PlaceDetails_Navigation__1Kpma",Gallery:"PlaceDetails_Gallery__3wNZI"}},22:function(e,t,a){e.exports={Places:"Places_Places__2EeAd",Grid:"Places_Grid__SvW1J",SearchBox:"Places_SearchBox__w04EK"}},25:function(e,t,a){e.exports={Header:"Header_Header__DQIIZ",HeaderMain:"Header_HeaderMain__1LSBl"}},37:function(e,t,a){e.exports={Loader:"Loader_Loader__1lwef","lds-ellipsis1":"Loader_lds-ellipsis1__2oM3i","lds-ellipsis2":"Loader_lds-ellipsis2__1b-Ni","lds-ellipsis3":"Loader_lds-ellipsis3__1kpqs"}},38:function(e,t,a){e.exports={ErrorBox:"ErrorBox_ErrorBox__3pbkI"}},39:function(e,t,a){e.exports={Content:"Content_Content__TYbYD"}},42:function(e,t,a){e.exports={Main:"Main_Main__rcAIR"}},43:function(e,t,a){e.exports={Section:"DetailsSection_Section__2x0bT"}},44:function(e,t,a){e.exports={Gallery:"GallerySection_Gallery__DlIIQ"}},45:function(e,t,a){e.exports={Card:"Card_Card__O1p4B"}},46:function(e,t,a){e.exports=a(74)},51:function(e,t,a){},74:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(36),o=a.n(l),i=(a(51),a(9)),c=a(10),s=a(12),d=a(11),m=a(13),u=a(2),p=a(7),f=a(19),_=a.n(f),h=function(e){var t=[_.a.Icons];return"header"===e.type?t.push(_.a.IconsHeader):"footer"===e.type&&t.push(_.a.IconsFooter),r.a.createElement("div",{className:t.join(" ")},r.a.createElement("i",{className:"fas fa-torii-gate"}),r.a.createElement("i",{className:"fas fa-landmark"}),r.a.createElement("i",{className:"fas fa-monument"}),r.a.createElement("i",{className:"fas fa-place-of-worship"}),r.a.createElement("i",{className:"fas fa-archway"}))},E=a(25),g=a.n(E),v=function(e){var t=[g.a.Header];return"main"===e.type&&t.push(g.a.HeaderMain),r.a.createElement("div",{className:t.join(" ")},r.a.createElement(h,{type:"header"}),r.a.createElement("h1",null,"The best places"),r.a.createElement("h2",null,"to see in ","main"===e.type?r.a.createElement("input",{type:"text",onChange:function(t){return e.changeCity(t)},value:e.city}):e.city),"main"===e.type?r.a.createElement("button",{onClick:e.search},"Check it!"):null)},y=a(20),S=a.n(y),w=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={position:0},a.stripeRef=r.a.createRef(),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState({position:this.stripeRef.current.offsetTop})}},{key:"render",value:function(){var e=[S.a.Stripe];return this.state.position-this.props.pageOffset<=300&&this.state.position>300?e.push(S.a.Fixed):e.push(S.a.Absolute),r.a.createElement("div",{ref:this.stripeRef,className:e.join(" ")},r.a.createElement("p",null,this.state.position),r.a.createElement("p",null,this.props.pageOffset))}}]),t}(n.Component),N=a(37),C=a.n(N),P=function(){return r.a.createElement("div",{className:C.a.Loader},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))},b=a(38),x=a.n(b),k=function(e){return r.a.createElement("div",{className:x.a.ErrorBox},r.a.createElement("h2",null,"Oops! Something went wrong"),r.a.createElement("p",null,"Try again with other city?"),r.a.createElement("button",{onClick:e.closeErrorBox},"OK"))},O=a(39),F=a.n(O),I=function(e){return r.a.createElement("div",{className:F.a.Content},e.children)},H=a(8),D=a.n(H),B=a(17),j=a.n(B),M=function(e){console.log(e);var t=r.a.createElement("div",{className:D.a.Place},r.a.createElement("div",{className:D.a.ImageContainer},r.a.createElement("img",{src:e.data.main_media?e.data.main_media.media[0].url:j.a,alt:e.data.main_media?e.data.main_media.media[0].attribution.title:null})),r.a.createElement("div",{className:D.a.DataContainer},r.a.createElement("h3",null,e.data.name),r.a.createElement("p",null,e.data.perex),r.a.createElement(u.b,{to:"/places/".concat(e.data.id),onClick:function(t){return e.setNewScrollPosition(0,"main",t.target)}},"Read More")));return parseInt(e.id)%2===0&&(t=r.a.createElement("div",{className:D.a.Place},r.a.createElement("div",{className:D.a.DataContainer},r.a.createElement("h3",null,e.data.name),r.a.createElement("p",null,e.data.perex),r.a.createElement(u.b,{to:"/places/".concat(e.data.id),onClick:function(t){return e.setNewScrollPosition(0,"main",t.target)}},"Read More")),r.a.createElement("div",{className:D.a.ImageContainer},r.a.createElement("img",{src:e.data.main_media?e.data.main_media.media[0].url:j.a,alt:e.data.main_media?e.data.main_media.media[0].attribution.title:null})))),t},R=a(18),A=a.n(R),T=function(){return r.a.createElement("footer",{className:A.a.Footer},r.a.createElement("div",{className:A.a.Footer__main},r.a.createElement("h1",null,"The best places"),r.a.createElement("div",{className:A.a.Footer__sub},r.a.createElement("h2",null,"to see"),r.a.createElement(h,{type:"footer"}))),r.a.createElement("div",{className:A.a.Footer__circle},r.a.createElement("p",null,"Powered by Sygic Travel API"),r.a.createElement("p",null,"Copy 2019 by Oskar Grzelak")))},G=a(42),L=a.n(G),K=function(e){var t=null,a=null,n=null,l=null;return e.loading&&(t=r.a.createElement(P,null)),e.data&&!e.loading&&(l=e.data.slice(0,5).map(function(t,a){return r.a.createElement(M,{data:t,setNewScrollPosition:e.setNewScrollPosition,key:a,id:a})}),n=r.a.createElement(I,null,l,r.a.createElement(u.b,{to:"/places",onClick:function(){return e.setNewScrollPosition(0)}},"See more places"))),e.error&&(a=r.a.createElement(k,{closeErrorBox:e.closeErrorBox})),r.a.createElement("div",{className:L.a.Main},r.a.createElement(v,{type:"main",changeCity:e.changeCity,search:e.search,city:e.city}),r.a.createElement(w,{pageOffset:e.pageOffset}),t,a,n,r.a.createElement(T,null))},Y=a(43),q=a.n(Y),Q=function(e){var t=null,a=null,n=null,l=null,o=null,i=null;return"Contact"!==e.title?e.data&&(a=r.a.createElement("h2",null,e.title),t=e.data.split("\n\n").map(function(e,t){return r.a.createElement("p",{key:t},e)})):(e.data.phone&&(n=r.a.createElement("p",null,"Phone: ",e.data.phone)),e.data.email&&(l=r.a.createElement("p",null,"E-mail: ",e.data.email)),e.data.address&&(o=r.a.createElement("p",null,"Address: ",e.data.address)),(n||l||o)&&(a=r.a.createElement("h2",null,"Contact"),t=r.a.createElement("div",null,n,l,o))),a&&(i=r.a.createElement("div",{className:q.a.Section},a,t)),i},J=a(44),W=a.n(J),X=function(e){var t=e.photos.map(function(t){return r.a.createElement("figure",{key:t.id,style:{width:"".concat(100/e.photos.length,"vw"),height:"".concat(100/e.photos.length,"vw")}},r.a.createElement("img",{src:t.url,alt:t.attribution.title}))});return r.a.createElement("div",{className:W.a.Gallery},t)},U=a(21),Z=a.n(U),z=function(e){var t=e.data.findIndex(function(t){return t.id===e.match.params.placeId}),a=e.data[t],n=r.a.createElement(u.b,{to:"/",onClick:function(){return e.setNewScrollPosition(e.position)}},r.a.createElement("i",{className:"fas fa-times"}));return"places"===e.redirectedFrom&&(n=r.a.createElement(u.b,{to:"/places",onClick:function(){return e.setNewScrollPosition(e.position)}},r.a.createElement("i",{className:"fas fa-times"}))),r.a.createElement("div",{className:Z.a.Details},r.a.createElement("div",{className:Z.a.Close},n),r.a.createElement("figure",null,r.a.createElement("img",{img:!0,src:a.main_media?a.main_media.media[0].url:null,alt:a.main_media?a.main_media.media[0].attribution.title:null}),r.a.createElement("figcaption",null,r.a.createElement("h1",null,a.name))),r.a.createElement(Q,{title:"About",data:a.description?a.description.text:null}),r.a.createElement(Q,{title:"Opening hours",data:a.opening_hours}),r.a.createElement(Q,{title:"Admission",data:a.admission}),r.a.createElement(Q,{title:"Contact",data:a}),a.main_media?r.a.createElement(X,{photos:a.main_media.media}):null,r.a.createElement("div",{className:Z.a.Navigation},r.a.createElement(u.b,{to:"/places/".concat(t-1>=0?e.data[t-1].id:e.data[e.data.length-1].id),onClick:function(){return e.setNewScrollPosition(0)}},"Previous"),r.a.createElement(u.b,{to:"/places/".concat(t+1<e.data.length?e.data[t+1].id:e.data[0].id),onClick:function(){return e.setNewScrollPosition(0)}},"Next")),r.a.createElement(T,null))},V=a(45),$=a.n(V),ee=function(e){return r.a.createElement("figure",{className:$.a.Card},r.a.createElement("img",{img:!0,src:e.data.main_media?e.data.main_media.media[0].url:j.a,alt:e.data.main_media?e.data.main_media.media[0].attribution.title:null}),r.a.createElement("figcaption",null,r.a.createElement("p",null,e.data.name,r.a.createElement("span",null,e.data.perex,r.a.createElement(u.b,{to:"/places/".concat(e.data.id),onClick:function(t){return e.setNewScrollPosition(0,"places",t.target.parentNode.parentNode.parentNode.parentNode.parentNode)}},"Read More")))))},te=a(22),ae=a.n(te),ne=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={newCity:""},a.changeCityHandler=function(e){a.setState({newCity:e.target.value})},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.data.map(function(t,a){return r.a.createElement(ee,{data:t,setNewScrollPosition:e.props.setNewScrollPosition,key:a})});return r.a.createElement("div",{className:ae.a.Places},r.a.createElement(v,{type:"places",city:this.props.city}),r.a.createElement("div",{className:ae.a.Grid},t),r.a.createElement("div",{className:ae.a.SearchBox},r.a.createElement("input",{type:"text",id:"newSearch",placeholder:"Do you want to check other city?",onChange:function(t){return e.changeCityHandler(t)}}),r.a.createElement("label",{htmlFor:"newSearch"},"Do you want to check other city?"),r.a.createElement(u.b,{to:"/",onClick:function(){return e.props.newSearch(e.state.newCity)}},r.a.createElement("i",{className:"fas fa-binoculars"}))),r.a.createElement(T,null))}}]),t}(n.Component),re=a(15),le=a.n(re);le.a.defaults.baseURL="https://api.sygictravelapi.com/1.1/en",le.a.defaults.headers.common["x-api-key"]="Nx61vXYQ978Fa6NqhRkdg90yxq90VRSu1xO5xlfm";var oe=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={city:"",search:!1,data:null,scroll:!1,scrollPosition:0,oldScrollPosition:0,loading:!1,error:!1,pageOffset:0,redirectedFrom:""},a.componentDidUpdate=function(){a.search(),a.scroll()},a.search=function(){var e=null,t=null;a.state.search&&le.a.get("/places/list?limit=1&query=".concat(a.state.city)).then(function(t){return e=t.data.data.places[0].id,le.a.get("/places/list?parents=".concat(e,"&level=poi&limit=30"))}).then(function(e){return t=e.data.data.places.map(function(e){return e.id}).reduce(function(e,t){return e+"%7C"+t}),le.a.get("/places?ids=".concat(t))}).then(function(e){a.setState({data:e.data.data.places,search:!1,loading:!1,scroll:!0,scrollPosition:window.innerHeight})}).catch(function(e){console.log(e),a.setState({error:!0,loading:!1,search:!1})})},a.scroll=function(){if(a.state.scroll){var e=a.state.scrollPosition;window.scrollTo(0,e),a.setState({scroll:!1})}},a.changeCityHandler=function(e){a.setState({city:e.target.value})},a.searchHandler=function(){a.setState({loading:!0,search:!0})},a.closeErrorBoxHandler=function(){a.setState({error:!1,scroll:!0,scrollPosition:0})},a.setScrollPosition=function(e){var t=e.getBoundingClientRect(),n=e.offsetTop-t.top;a.setState({scrollPosition:0,oldScrollPosition:n})},a.newSearchHandler=function(e){a.setState({loading:!0,city:e,showPlaces:!1,search:!0})},a.saveOldScrollPosition=function(e){var t=e.getBoundingClientRect();return e.offsetTop-t.top},a.setNewScrollPosition=function(e,t,n){var r=n?a.saveOldScrollPosition(n):a.state.oldScrollPosition,l=t||a.state.redirectedFrom;a.setState({scrollPosition:e,oldScrollPosition:r,scroll:!0,redirectedFrom:l})},a.stripeHandler=function(){window.addEventListener("scroll",function(){var e=window.pageYOffset;e!==a.state.pageOffset&&a.setState({pageOffset:e})})},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return this.stripeHandler(),r.a.createElement(u.a,null,r.a.createElement(p.a,{exact:!0,path:"/",render:function(){return r.a.createElement(K,{changeCity:e.changeCityHandler,search:e.searchHandler,loading:e.state.loading,error:e.state.error,closeErrorBox:e.closeErrorBoxHandler,city:e.state.city,data:e.state.data,pageOffset:e.state.pageOffset,setNewScrollPosition:e.setNewScrollPosition})}}),r.a.createElement(p.a,{exact:!0,path:"/places",render:function(){return r.a.createElement(ne,{city:e.state.city,data:e.state.data,newSearch:e.newSearchHandler,setNewScrollPosition:e.setNewScrollPosition})}}),r.a.createElement(p.a,{path:"/places/:placeId",render:function(t){var a=t.match;return r.a.createElement(z,{data:e.state.data,redirectedFrom:e.state.redirectedFrom,position:e.state.oldScrollPosition,setNewScrollPosition:e.setNewScrollPosition,match:a})}}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(oe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},8:function(e,t,a){e.exports={Place:"Place_Place__3gkEc",ImageContainer:"Place_ImageContainer__1Ysn_",DataContainer:"Place_DataContainer__2o9DF"}}},[[46,1,2]]]);
//# sourceMappingURL=main.877d0283.chunk.js.map